{"ast":null,"code":"import _slicedToArray from \"F:\\\\web_dev\\\\github\\\\SpoOsu\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\web_dev\\\\github\\\\SpoOsu\\\\client\\\\src\\\\components\\\\Callback.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Redirect } from \"react-router\";\nimport axios from \"axios\";\n\nconst Callback = props => {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        accessToken = _useState2[0],\n        setAccessToken = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        refreshToken = _useState4[0],\n        setRefreshToken = _useState4[1];\n\n  const api = \"http://localhost:3003/api/auth\";\n  const code = props.location.search.slice(6);\n  useEffect(() => {\n    const getToken = async () => {\n      try {\n        const response = await axios.post(api, {\n          code\n        });\n        let accToken = response.data.accessToken;\n        let refToken = response.data.refreshToken;\n        setAccessToken(accToken);\n        setRefreshToken(refToken);\n        window.localStorage.setItem(\"SpoOsuToken\", JSON.stringify({\n          accessToken: accToken,\n          refreshToken: refToken\n        }));\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    getToken();\n  }, [code]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, accessToken && refreshToken ? React.createElement(Redirect, {\n    push: true,\n    to: {\n      pathname: \"/main/\",\n      state: {\n        accessToken,\n        refreshToken\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Loading...\"));\n};\n\nexport default Callback;","map":{"version":3,"sources":["F:\\web_dev\\github\\SpoOsu\\client\\src\\components\\Callback.js"],"names":["React","useState","useEffect","Redirect","axios","Callback","props","accessToken","setAccessToken","refreshToken","setRefreshToken","api","code","location","search","slice","getToken","response","post","accToken","data","refToken","window","localStorage","setItem","JSON","stringify","e","console","log","pathname","state"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AAAA,oBACgBL,QAAQ,CAAC,IAAD,CADxB;AAAA;AAAA,QACfM,WADe;AAAA,QACFC,cADE;;AAAA,qBAEkBP,QAAQ,CAAC,IAAD,CAF1B;AAAA;AAAA,QAEfQ,YAFe;AAAA,QAEDC,eAFC;;AAGtB,QAAMC,GAAG,GAAG,gCAAZ;AACA,QAAMC,IAAI,GAAGN,KAAK,CAACO,QAAN,CAAeC,MAAf,CAAsBC,KAAtB,CAA4B,CAA5B,CAAb;AAEAb,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMc,QAAQ,GAAG,YAAY;AACzB,UAAI;AACA,cAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAN,CAAWP,GAAX,EAAgB;AACnCC,UAAAA;AADmC,SAAhB,CAAvB;AAGA,YAAIO,QAAQ,GAAGF,QAAQ,CAACG,IAAT,CAAcb,WAA7B;AACA,YAAIc,QAAQ,GAAGJ,QAAQ,CAACG,IAAT,CAAcX,YAA7B;AACAD,QAAAA,cAAc,CAACW,QAAD,CAAd;AACAT,QAAAA,eAAe,CAACW,QAAD,CAAf;AAEAC,QAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACI,aADJ,EAEIC,IAAI,CAACC,SAAL,CAAe;AACXnB,UAAAA,WAAW,EAAEY,QADF;AAEXV,UAAAA,YAAY,EAAEY;AAFH,SAAf,CAFJ;AAOH,OAhBD,CAgBE,OAAOM,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACJ,KApBD;;AAqBAX,IAAAA,QAAQ;AACX,GAvBQ,EAuBN,CAACJ,IAAD,CAvBM,CAAT;AAyBI,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCL,WAAW,IAAIE,YAAf,GAA8B,oBAAC,QAAD;AAC3B,IAAA,IAAI,MADuB;AAE3B,IAAA,EAAE,EAAE;AACAqB,MAAAA,QAAQ,EAAE,QADV;AAEAC,MAAAA,KAAK,EAAE;AAAExB,QAAAA,WAAF;AAAeE,QAAAA;AAAf;AAFP,KAFuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA9B,GAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPL,CADJ;AAcP,CA7CD;;AA+CA,eAAeJ,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport { Redirect } from \"react-router\"\r\nimport axios from \"axios\"\r\n\r\nconst Callback = props => {\r\n    const [accessToken, setAccessToken] = useState(null)\r\n    const [refreshToken, setRefreshToken] = useState(null)\r\n    const api = \"http://localhost:3003/api/auth\"\r\n    const code = props.location.search.slice(6)\r\n\r\n    useEffect(() => {\r\n        const getToken = async () => {\r\n            try {\r\n                const response = await axios.post(api, {\r\n                    code\r\n                })\r\n                let accToken = response.data.accessToken\r\n                let refToken = response.data.refreshToken\r\n                setAccessToken(accToken)\r\n                setRefreshToken(refToken)\r\n\r\n                window.localStorage.setItem(\r\n                    \"SpoOsuToken\",\r\n                    JSON.stringify({\r\n                        accessToken: accToken,\r\n                        refreshToken: refToken\r\n                    })\r\n                )\r\n            } catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n        getToken()\r\n    }, [code])\r\n\r\n        return (\r\n            <div>\r\n            {accessToken && refreshToken ? <Redirect\r\n                push\r\n                to={{\r\n                    pathname: \"/main/\",\r\n                    state: { accessToken, refreshToken }\r\n                }}\r\n            /> : <div>Loading...</div>}\r\n\r\n            </div>\r\n        )\r\n\r\n\r\n}\r\n\r\nexport default Callback\r\n"]},"metadata":{},"sourceType":"module"}