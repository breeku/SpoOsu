{"ast":null,"code":"import _slicedToArray from \"F:\\\\web_dev\\\\github\\\\SpoOsu\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"F:\\\\web_dev\\\\github\\\\SpoOsu\\\\client\\\\src\\\\components\\\\Callback.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Redirect } from \"react-router\";\nimport axios from \"axios\";\n\nconst Callback = props => {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        accessToken = _useState2[0],\n        setAccessToken = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        refreshToken = _useState4[0],\n        setRefreshToken = _useState4[1];\n\n  const api = \"http://localhost:3003/api/auth\";\n\n  const getToken = async () => {\n    try {\n      const response = await axios.post(api, {\n        code: props.location.search.slice(6)\n      });\n      console.log(response.data);\n      setAccessToken(response.data.accessToken);\n      setRefreshToken(response.data.refreshToken);\n      window.localStorage.setItem(\"SpoOsuToken\", JSON.stringify({\n        accessToken,\n        refreshToken\n      }));\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    const fetch = async () => {\n      await getToken();\n    };\n\n    fetch();\n  });\n  return React.createElement(Redirect, {\n    to: {\n      pathname: '/',\n      state: {\n        accessToken,\n        refreshToken\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  });\n};\n\nexport default Callback;","map":{"version":3,"sources":["F:\\web_dev\\github\\SpoOsu\\client\\src\\components\\Callback.js"],"names":["React","useState","useEffect","Redirect","axios","Callback","props","accessToken","setAccessToken","refreshToken","setRefreshToken","api","getToken","response","post","code","location","search","slice","console","log","data","window","localStorage","setItem","JSON","stringify","e","fetch","pathname","state"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AAAA,oBACgBL,QAAQ,CAAC,IAAD,CADxB;AAAA;AAAA,QACfM,WADe;AAAA,QACFC,cADE;;AAAA,qBAEkBP,QAAQ,CAAC,IAAD,CAF1B;AAAA;AAAA,QAEfQ,YAFe;AAAA,QAEDC,eAFC;;AAGtB,QAAMC,GAAG,GAAG,gCAAZ;;AAEA,QAAMC,QAAQ,GAAG,YAAY;AACzB,QAAI;AACA,YAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CAAWH,GAAX,EAAgB;AACnCI,QAAAA,IAAI,EAAET,KAAK,CAACU,QAAN,CAAeC,MAAf,CAAsBC,KAAtB,CAA4B,CAA5B;AAD6B,OAAhB,CAAvB;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAYP,QAAQ,CAACQ,IAArB;AACAb,MAAAA,cAAc,CAACK,QAAQ,CAACQ,IAAT,CAAcd,WAAf,CAAd;AACAG,MAAAA,eAAe,CAACG,QAAQ,CAACQ,IAAT,CAAcZ,YAAf,CAAf;AAEAa,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACI,aADJ,EAEIC,IAAI,CAACC,SAAL,CAAe;AACXnB,QAAAA,WADW;AAEXE,QAAAA;AAFW,OAAf,CAFJ;AAQH,KAhBD,CAgBE,OAAOkB,CAAP,EAAU;AACRR,MAAAA,OAAO,CAACC,GAAR,CAAYO,CAAZ;AACH;AACJ,GApBD;;AAsBAzB,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAM0B,KAAK,GAAG,YAAY;AACtB,YAAMhB,QAAQ,EAAd;AACH,KAFD;;AAGAgB,IAAAA,KAAK;AACR,GALQ,CAAT;AAOA,SACI,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAE;AACVC,MAAAA,QAAQ,EAAE,GADA;AAEVC,MAAAA,KAAK,EAAE;AAACvB,QAAAA,WAAD;AAAcE,QAAAA;AAAd;AAFG,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAMH,CAxCD;;AA0CA,eAAeJ,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport { Redirect } from \"react-router\"\r\nimport axios from \"axios\"\r\n\r\nconst Callback = props => {\r\n    const [accessToken, setAccessToken] = useState(null)\r\n    const [refreshToken, setRefreshToken] = useState(null)\r\n    const api = \"http://localhost:3003/api/auth\"\r\n\r\n    const getToken = async () => {\r\n        try {\r\n            const response = await axios.post(api, {\r\n                code: props.location.search.slice(6)\r\n            })\r\n            console.log(response.data)\r\n            setAccessToken(response.data.accessToken)\r\n            setRefreshToken(response.data.refreshToken)\r\n\r\n            window.localStorage.setItem(\r\n                \"SpoOsuToken\",\r\n                JSON.stringify({\r\n                    accessToken,\r\n                    refreshToken\r\n                })\r\n            )\r\n\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetch = async () => {\r\n            await getToken()\r\n        }\r\n        fetch()\r\n    })\r\n\r\n    return (\r\n        <Redirect to={{\r\n            pathname: '/',\r\n            state: {accessToken, refreshToken}\r\n        }}/>\r\n    )\r\n}\r\n\r\nexport default Callback\r\n"]},"metadata":{},"sourceType":"module"}