{"ast":null,"code":"var _jsxFileName = \"F:\\\\web_dev\\\\github\\\\SpoOsu\\\\client\\\\src\\\\components\\\\Callback.js\";\nimport React, { useEffect } from \"react\";\nimport { Redirect } from \"react-router\";\nimport axios from \"axios\";\n\nconst Callback = props => {\n  const api = \"http://localhost:3003/api/auth\";\n  const code = props.location.search.slice(6);\n  let accessToken = \"\";\n  let refreshToken = \"\";\n  useEffect(() => {\n    const getToken = async () => {\n      try {\n        const response = await axios.post(api, {\n          code\n        });\n        accessToken = response.data.accessToken;\n        refreshToken = response.data.refreshToken;\n        window.localStorage.setItem(\"SpoOsuToken\", JSON.stringify({\n          accessToken,\n          refreshToken\n        }));\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    getToken();\n  }, [code]);\n  return React.createElement(Redirect, {\n    to: {\n      pathname: \"/\",\n      state: {\n        accessToken,\n        refreshToken\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  });\n};\n\nexport default Callback;","map":{"version":3,"sources":["F:\\web_dev\\github\\SpoOsu\\client\\src\\components\\Callback.js"],"names":["React","useEffect","Redirect","axios","Callback","props","api","code","location","search","slice","accessToken","refreshToken","getToken","response","post","data","window","localStorage","setItem","JSON","stringify","e","console","log","pathname","state"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AACtB,QAAMC,GAAG,GAAG,gCAAZ;AACA,QAAMC,IAAI,GAAGF,KAAK,CAACG,QAAN,CAAeC,MAAf,CAAsBC,KAAtB,CAA4B,CAA5B,CAAb;AACA,MAAIC,WAAW,GAAG,EAAlB;AACA,MAAIC,YAAY,GAAG,EAAnB;AAEAX,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMY,QAAQ,GAAG,YAAY;AACzB,UAAI;AACA,cAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,IAAN,CAAWT,GAAX,EAAgB;AACnCC,UAAAA;AADmC,SAAhB,CAAvB;AAGAI,QAAAA,WAAW,GAAGG,QAAQ,CAACE,IAAT,CAAcL,WAA5B;AACAC,QAAAA,YAAY,GAAGE,QAAQ,CAACE,IAAT,CAAcJ,YAA7B;AACAK,QAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACI,aADJ,EAEIC,IAAI,CAACC,SAAL,CAAe;AACXV,UAAAA,WADW;AAEXC,UAAAA;AAFW,SAAf,CAFJ;AAOH,OAbD,CAaE,OAAOU,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACJ,KAjBD;;AAkBAT,IAAAA,QAAQ;AACX,GApBQ,EAoBN,CAACN,IAAD,CApBM,CAAT;AAqBA,SACI,oBAAC,QAAD;AACI,IAAA,EAAE,EAAE;AACAkB,MAAAA,QAAQ,EAAE,GADV;AAEAC,MAAAA,KAAK,EAAE;AAACf,QAAAA,WAAD;AAAcC,QAAAA;AAAd;AAFP,KADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAQH,CAnCD;;AAqCA,eAAeR,QAAf","sourcesContent":["import React, { useEffect } from \"react\"\r\nimport { Redirect } from \"react-router\"\r\nimport axios from \"axios\"\r\n\r\nconst Callback = props => {\r\n    const api = \"http://localhost:3003/api/auth\"\r\n    const code = props.location.search.slice(6)\r\n    let accessToken = \"\"\r\n    let refreshToken = \"\"\r\n\r\n    useEffect(() => {\r\n        const getToken = async () => {\r\n            try {\r\n                const response = await axios.post(api, {\r\n                    code\r\n                })\r\n                accessToken = response.data.accessToken\r\n                refreshToken = response.data.refreshToken\r\n                window.localStorage.setItem(\r\n                    \"SpoOsuToken\",\r\n                    JSON.stringify({\r\n                        accessToken,\r\n                        refreshToken\r\n                    })\r\n                )\r\n            } catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n        getToken()\r\n    }, [code])\r\n    return (\r\n        <Redirect\r\n            to={{\r\n                pathname: \"/\",\r\n                state: {accessToken, refreshToken}\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default Callback\r\n"]},"metadata":{},"sourceType":"module"}